<form name="editForm" role="form" novalidate (ngSubmit)="save()" [formGroup]="editForm">
    <div class="modal-header">
        <h4 class="modal-title"> {{title}}[ Les champs marqués par <span style="font-weight: 900;color: red;">*</span>
            sont obligatoires ] </h4>

        <button type="button" class="close" data-dismiss="modal" aria-hidden="true" (click)="cancel()">&times;</button>
    </div>

    <div class="modal-body">

        <div class="ui-g-12 form-group">
            <div  [hidden]="!editForm.get('id')!.value">
                <input type="hidden" class="form-control" id="id" name="id" formControlName="id" readonly />
            </div>
            <div class="row ui-g-12">
          
                <label for="field_firstName" class="col-sm-1 col-form-label">Nom<span style="font-weight: 900;color: red;">*</span></label>
                <div class="col-sm-3">
                    <input type="text" pInputText class="form-control" name="firstName" id="field_firstName"
                        formControlName="firstName" />
                </div>

                <label for="field_lastName" class="col-sm-1 col-form-label">Prénom(s)<span style="font-weight: 900;color: red;">*</span></label>
                <div class="col-sm-3">
                    <input type="text" pInputText class="form-control" name="lastName" id="field_lastName"
                        formControlName="lastName">
                </div>
           
            
                <label for="typeClient" class="col-auto col-form-label">Type client<span style="font-weight: 900;color: red;">*</span></label>
                <div class="col-sm-2">
                    <p-dropdown [options]="types" styleClass="form-control" id="typeClient" name="typeClient"  (onChange)="onTypeClientValueChange($event.value)"
                        formControlName="typeClient" styleClass="dropdown-width" [filter]="false"
                        placeholder="Séléctionner un type " itemSize="3">
                    </p-dropdown>
                </div>
           
            </div>
            <div *ngIf="editForm.controls.typeClient.value!=types[0].value" >
                <div formArrayName="compteClients"
                    *ngFor="let compteclient of editForm.get('compteClients')['controls']; let i = index">
                    <ng-container [formGroupName]="i">
                        <div class="row ui-g-12">
             
                            <label class="col-auto col-form-label">Tiers-payant<span
                                    style="font-weight: 900;color: red;">*</span></label>
                            <div class="col-sm-4">
                                <p-dropdown [options]="tierspayants" styleClass="form-control" 
                                    formControlName="tierspayantId" styleClass="dropdown-width"
                                    [filter]="true" placeholder="Séléctionner un tiers-payant " [virtualScroll]="true"
                                    itemSize="30">
                                </p-dropdown>
                            </div>
                            <label class="col-auto col-form-label">Taux<span style="font-weight: 900;color: red;">*</span></label>
                            <div class="col-sm-2">
                                <input type="number" pInputText class="form-control" 
                                    formControlName="taux">
                            </div>
                            <label class="col-sm-1 col-form-label">Matricule</label>
                            <div class="col-sm-2">
                                <input type="text" pInputText class="form-control"
                                    formControlName="numMaticule">
                            </div>
                        </div>
                    
                        <div class="row ui-g-12">
                            
                            <label class="col-auto col-form-label">Plafond</label>
                            <div class="col-sm-3">
                                <input type="number" pInputText class="form-control"
                                    formControlName="plafondMensuel">
                            </div>
                            <div class="col-sm-3">
                              <p-checkbox [binary]="true" label="Le plafond est-il absolu ?" 
                                formControlName="absolute"></p-checkbox>
                            </div>
                            <label class="col-md-2 col-form-label">Plafond vente</label>
                            <div class="col-md-3">
                                <input type="number" pInputText class="form-control"
                                    formControlName="plafondJournalier">
                            </div>
                          </div>
                    </ng-container>
                </div>

            </div>





            <div class="row ui-g-12">

                <label for="field_datNaiss" class="col-auto col-form-label">Date de naissance</label>
                <div class="col-auto">
                    <p-inputMask mask="99/99/9999" name="datNaiss" id="field_datNaiss" formControlName="datNaiss"
                        placeholder="01/11/2020" slotChar="dd/mm/yyyy"></p-inputMask>
                </div>


           

                <label class="col-auto col-form-label" for="field_mobile">Mobile</label>
                <div class="col-auto">
                    <input type="text" pInputText class="form-control" name="mobile" id="field_mobile"
                        formControlName="mobile">
                </div>


            



                <label class="col-auto col-form-label" for="field_mail">E-mail</label>
                <div class="col-auto">
                    <input type="text" pInputText class="form-control" name="mail" id="field_mail"
                        formControlName="mail">
                </div>

            </div>
            <div class="row ui-g-12">

                <label class="col-sm-2 col-form-label" for="field_compagnieId">Entreprises</label>
                <div class="col-sm-4">
                    <p-dropdown [options]="compagnies" styleClass="form-control" id="field_compagnieId"
                        name="compagnieId" formControlName="compagnieId" styleClass="dropdown-width" [filter]="true"
                        placeholder="Séléctionner une entreprise " [virtualScroll]="true" itemSize="30">
                    </p-dropdown>
                </div>
            

                <label class="col-sm-2 col-form-label" for="field_remiseId">Remise</label>
                <div class="col-sm-4">
                    <p-dropdown [options]="remises" styleClass="form-control" id="field_remiseId" name="remiseId"
                        formControlName="remiseId" styleClass="dropdown-width" [filter]="true"
                        placeholder="Séléctionner une entreprise " [virtualScroll]="true" itemSize="30">
                    </p-dropdown>
                </div>
            </div>

            <div class="row ui-g-12">
                <label for="field_sexe" class="col-md-2 col-form-label">Sexe</label>
                <div class="col-md-5">
                    <p-radioButton class="form-control" name="sexe" inputId="field_sexe" value="F" label="Féminin"
                        formControlName="sexe"></p-radioButton>
                </div>

                <div class="col-md-5">
                    <p-radioButton class="form-control" name="sexe" inputId="field_sexe_m" value="M" label="Masculin"
                        formControlName="sexe"></p-radioButton>

                </div>
            </div>

        </div>
    </div>
    <div class="modal-footer">

        <button type="submit" [disabled]="editForm.invalid || isSaving" pButton icon="pi pi-check" (click)="save()"
            label="Enregistrer"></button>
        <button type="button" class="ui-button-danger" pButton icon="pi pi-times" (click)="cancel()"
            label="Annuler"></button>

    </div>

</form>